##### RSI AT ####
input comparepct_min = 90.00;
input comparepct_max = 110.00;


input price = close;
input length = 14;
input averagetype = averageType.WILDERS;


#IGNORE BELOW
def NetChgAvg = MovingAverage(averagetype, price - price[1], length);
def TotChgAvg = MovingAverage(averagetype, AbsValue(price - price[1]), length);
def ChgRatio = if TotChgAvg != 0 then NetChgAvg / TotChgAvg else 0;

def RSI = round(50 * (ChgRatio + 1),2);
def reset_cond = getday() != getday()[1];
def rsi_at_time = if reset_cond then rsi else rsi_at_time[1];
def rsi_yesterday_close = if reset_cond then rsi[1] else rsi_yesterday_close[1];

#we multiply by negative one
def rsi_pct_change = (rsi_yesterday_close - rsi_at_time ) / rsi_yesterday_close * -1;
def scan = rsi_pct_change * 100 >= comparepct_min and rsi_pct_change * 100 <= comparepct_max;

addlabel(yes, aspercent(rsi_pct_change), if scan then color.cyan else color.dark_gray);


