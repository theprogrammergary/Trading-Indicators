Here are the updates.In both versions signal looping is removed and we just compare with the previous swing levels. Also in both versions it tracks the bottom oscillator separately between highs/lows.The difference between V2 and V3 is that if the current value is greater than the last confirmed swing high value then it gets marked as a hh. If the current value is less than the last confirmed swing low value then it gets marked as a ll. This is so that we don't have to wait the x amount of bars for the swing value to be confirmed.Let me know if you have any questions.